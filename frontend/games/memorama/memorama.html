<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorama Familiar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0;
            padding: 20px;
            color: white;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        #nombre-jugador {
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        #juego {
            opacity: 0;
            transition: opacity 1s;
            margin: 30px auto;
            width: 625px;
            height: 625px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 10px;
        }
        #tablero {
            width: 100%;
            height: 100%;
            border-collapse: collapse;
        }
        .carta {
            width: 25%;
            height: 25%;
            background-color: #2c3e50;
            border: 4px solid #34495e;
            border-radius: 12px;
            font-size: 48px;
            font-weight: bold;
            color: white;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            transition: all 0.4s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }
        .carta:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.6);
        }
        .carta.volteada { background-color: #3498db; }
        .carta.acertada { background-color: #2ecc71 !important; }
        .centrar { margin: 30px 0; }
        button {
            padding: 12px 30px;
            margin: 0 10px;
            font-size: 18px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        button:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }
        #mensaje {
            margin-top: 30px;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
            min-height: 60px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Memorama Familiar</h1>
        <div id="nombre-jugador"></div>

        <div id="juego">
            <table id="tablero">
                <tr>
                    <td id="0" class="carta" onclick="girarCarta(0)">?</td>
                    <td id="1" class="carta" onclick="girarCarta(1)">?</td>
                    <td id="2" class="carta" onclick="girarCarta(2)">?</td>
                    <td id="3" class="carta" onclick="girarCarta(3)">?</td>
                </tr>
                <tr>
                    <td id="4" class="carta" onclick="girarCarta(4)">?</td>
                    <td id="5" class="carta" onclick="girarCarta(5)">?</td>
                    <td id="6" class="carta" onclick="girarCarta(6)">?</td>
                    <td id="7" class="carta" onclick="girarCarta(7)">?</td>
                </tr>
                <tr>
                    <td id="8" class="carta" onclick="girarCarta(8)">?</td>
                    <td id="9" class="carta" onclick="girarCarta(9)">?</td>
                    <td id="10" class="carta" onclick="girarCarta(10)">?</td>
                    <td id="11" class="carta" onclick="girarCarta(11)">?</td>
                </tr>
                <tr>
                    <td id="12" class="carta" onclick="girarCarta(12)">?</td>
                    <td id="13" class="carta" onclick="girarCarta(13)">?</td>
                    <td id="14" class="carta" onclick="girarCarta(14)">?</td>
                    <td id="15" class="carta" onclick="girarCarta(15)">?</td>
                </tr>
            </table>
        </div>

        <div class="centrar">
            <button onclick="iniciarJuego()">Iniciar Juego</button>
            <button onclick="resetearJuego()">Reiniciar</button>
        </div>

        <div id="mensaje"></div>
    </div>

    <script>
        let cartas = ["Anjelita","Anjelita","Rodrigo","Rodrigo","Clara Ines","Clara Ines","Eugenia","Eugenia",
                       "Maria Victoria","Maria Victoria","Antonio","Antonio","Carlos Eduardo","Carlos Eduardo",
                       "Carmen Elena","Carmen Elena"];
        let jugada1 = null, jugada2 = null, id1 = null, id2 = null, bloqueado = false, nombreJugador = "";

        function iniciarJuego() {
            nombreJugador = prompt("¡Bienvenido al Memorama Familiar!\n\n¿Cuál es tu nombre?", "Jugador") || "Jugador";
            document.getElementById("nombre-jugador").innerHTML = `¡Hola, <strong>${nombreJugador}</strong>! ¡Encuentra todos los pares!`;
            document.getElementById("juego").style.opacity = 1;
            document.getElementById("mensaje").innerHTML = "";
            barajarCartas();
            resetearTablero();
        }

        function barajarCartas() {
            for (let i = cartas.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cartas[i], cartas[j]] = [cartas[j], cartas[i]];
            }
        }

        function resetearTablero() {
            for (let i = 0; i < 16; i++) {
                const celda = document.getElementById(i);
                celda.dataset.valor = cartas[i];
                celda.innerHTML = "?";
                celda.classList.remove("volteada", "acertada");
            }
            jugada1 = jugada2 = id1 = id2 = null;
            bloqueado = false;
        }

        function girarCarta(id) {
            if (bloqueado) return;
            const celda = document.getElementById(id);
            if (celda.classList.contains("acertada") || celda.classList.contains("volteada")) return;

            celda.classList.add("volteada");
            celda.innerHTML = celda.dataset.valor;

            if (!jugada1) {
                jugada1 = celda.dataset.valor;
                id1 = id;
            } else {
                jugada2 = celda.dataset.valor;
                id2 = id;
                bloqueado = true;

                setTimeout(() => {
                    if (jugada1 === jugada2) {
                        document.getElementById(id1).classList.add("acertada");
                        document.getElementById(id2).classList.add("acertada");
                        if (document.querySelectorAll(".acertada").length === 16) {
                            document.getElementById("mensaje").innerHTML = 
                                `¡FELICIDADES ${nombreJugador.toUpperCase()}!<br>¡GANASTE EL MEMORAMA!`;
                        }
                    } else {
                        document.getElementById(id1).classList.remove("volteada");
                        document.getElementById(id2).classList.remove("volteada");
                        document.getElementById(id1).innerHTML = "?";
                        document.getElementById(id2).innerHTML = "?";
                    }
                    jugada1 = jugada2 = id1 = id2 = null;
                    bloqueado = false;
                }, 800);
            }
        }

        function resetearJuego() {
            barajarCartas();
            resetearTablero();
            document.getElementById("mensaje").innerHTML = "";
        }
    </script>
</body>
</html>